<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ŸÖŸÜŸäŸà ÿ™ÿ™ÿ±ÿß ÿ®Ÿäÿ™ÿ≤ÿß</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f7f7f7;
      margin: 0;
      padding: 0;
      color: #333;
      overflow-x: hidden;
    }
    header {
      background: #4a4a4a;
      padding: 1rem;
      text-align: center;
      font-size: 1.8rem;
      font-weight: bold;
      color: #fff;
      position: relative;
    }
    .checkout-global {
      position: sticky;
      top: 0;
      z-index: 10;
      background: #2a2a2a;
      text-align: center;
      padding: 0.5rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .checkout-global button {
      background: #ff5722;
      color: #fff;
      padding: 0.8rem 1.2rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      transition: background 0.3s ease;
    }
    .checkout-global button:hover {
      background: #e64a19;
    }
    .category-tabs {
      position: sticky;
      top: 70px; /* Adjust this value if the checkout bar height changes */
      z-index: 9;
      background-color: #fff;
      padding: 0.75rem 0.5rem;
      border-bottom: 1px solid #ddd;
      display: flex;
      justify-content: flex-start;
      gap: 0.5rem;
      overflow-x: auto;
      white-space: nowrap;
      -webkit-overflow-scrolling: touch;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .category-tabs::-webkit-scrollbar {
      display: none;
    }
    .category-tabs button {
      background-color: #f0f0f0;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 500;
      color: #555;
      transition: background-color 0.2s ease, transform 0.2s ease;
      flex-shrink: 0;
    }
    .category-tabs button.active {
      background-color: #2196F3;
      color: #fff;
      font-weight: bold;
      transform: scale(1.05);
    }
    .menu {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      padding: 1.5rem;
    }
    .item {
      background: #fff;
      border-radius: 12px;
      padding: 1.2rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .item:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    }
    .item img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 0.75rem;
    }
    .item h3 {
      font-size: 1.2rem;
      margin: 0.5rem 0 0.25rem;
      font-weight: 600;
    }
    .item p {
      font-size: 0.9rem;
      margin: 0.2rem 0;
      color: #666;
    }
    .item .price {
      font-size: 1.1rem;
      font-weight: bold;
      color: #e64a19;
      margin-top: auto;
    }
    .item .actions {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    .item .size-buttons {
      display: flex;
      justify-content: space-around;
      gap: 0.5rem;
      margin-top: 0.5rem;
      flex-wrap: wrap;
    }
    .item .size-buttons button {
      flex: 1 1 80px;
      padding: 0.6rem;
      background: #f0f0f0;
      color: #333;
      border: 1px solid #ddd;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: bold;
      transition: all 0.2s ease;
    }
    .item .size-buttons button:hover {
      background: #e0e0e0;
      border-color: #bbb;
    }
    .item button {
      padding: 0.8rem 1rem;
      background: #2196F3;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      transition: background 0.3s ease;
    }
    .item button:hover {
      background: #1976D2;
    }
    .item .qty-btn {
      background: #2196F3;
      padding: 0.6rem 1rem;
      font-size: 1.2rem;
      font-weight: bold;
    }
    .cart {
      position: fixed;
      top: 0;
      right: -450px;
      width: 400px;
      max-width: 90%;
      height: 100%;
      background: #fff;
      box-shadow: -4px 0 10px rgba(0,0,0,0.1);
      padding: 1.5rem;
      transition: right 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      display: flex;
      flex-direction: column;
      z-index: 100;
    }
    .cart.open {
      right: 0;
    }
    .cart h2 {
      margin-top: 0;
      font-size: 1.5rem;
      border-bottom: 2px solid #eee;
      padding-bottom: 0.5rem;
    }
    .cart-items {
      flex: 1;
      overflow-y: auto;
      padding: 0.5rem 0;
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding: 0.75rem;
      background: #f9f9f9;
      border-radius: 8px;
    }
    .cart-item span {
      flex: 1;
    }
    .cart-item button {
      background: #f44336;
      border: none;
      color: #fff;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .cart-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #ff5722;
      color: #fff;
      width: 55px;
      height: 55px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      font-size: 1.8rem;
      z-index: 50;
    }
  </style>
</head>
<body>
  <header>ŸÖŸÜŸäŸà ÿ™ÿ™ÿ±ÿß ÿ®Ÿäÿ™ÿ≤ÿß</header>
  
  <div class="checkout-global">
    <button onclick="checkout()">ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ®</button>
  </div>

  <div class="category-tabs" id="category-tabs"></div>

  <div class="menu" id="menu"></div>

  <div class="cart" id="cart">
    <h2>ÿßŸÑÿ≥ŸÑÿ©</h2>
    <div class="cart-items" id="cart-items"></div>
  </div>
  <div class="cart-toggle" onclick="toggleCart()">üõí</div>
  
  <script>
    const tg = (window.Telegram && window.Telegram.WebApp) ? window.Telegram.WebApp : null;
    if (tg) { try { tg.ready(); tg.expand(); } catch(_){} }

    const menuData = [
      // ÿπÿ±Ÿàÿ∂ (Offers)
      { id: 1, category: 'ÿπÿ±Ÿàÿ∂', name: 'ÿπÿ±ÿ∂ ÿßŸÑÿ£Ÿàÿ≥ÿ∑', description: '', price: 65, image: 'https://via.placeholder.com/300x150/ff5722/fff?text=Offer' },
      { id: 2, category: 'ÿπÿ±Ÿàÿ∂', name: 'ÿπÿ±ÿ∂ ÿßŸÑŸÉÿ®Ÿäÿ±', description: '', price: 99, image: 'https://via.placeholder.com/300x150/ff5722/fff?text=Offer' },
      { id: 3, category: 'ÿπÿ±Ÿàÿ∂', name: 'ÿπÿ±ÿ∂ ÿßŸÑÿπÿßÿ¶ŸÑŸä', description: '', price: 139, image: 'https://via.placeholder.com/300x150/ff5722/fff?text=Offer' },
      // ÿ®ÿßÿ≥ÿ™ÿß (Pasta)
      { id: 4, category: 'ÿ®ÿßÿ≥ÿ™ÿß', name: 'ÿ®Ÿäÿ≥ÿ™Ÿà ÿ®ÿßÿ≥ÿ™ÿß', description: '', price: 30, image: 'https://via.placeholder.com/300x150/8a2be2/fff?text=Pesto+Pasta' },
      { id: 5, category: 'ÿ®ÿßÿ≥ÿ™ÿß', name: 'ŸÅŸäÿ™Ÿàÿ™ÿ¥ŸäŸÜŸä ÿ®ÿßÿ≥ÿ™ÿß', description: '', price: 25, image: 'https://via.placeholder.com/300x150/8a2be2/fff?text=Fettuccine+Pasta' },
      { id: 6, category: 'ÿ®ÿßÿ≥ÿ™ÿß', name: 'ŸÑÿßÿ≤ÿßŸÜŸäÿß', description: '', price: 27, image: 'https://via.placeholder.com/300x150/8a2be2/fff?text=Lasagna' },
      { id: 7, category: 'ÿ®ÿßÿ≥ÿ™ÿß', name: 'ŸÖŸäŸÉÿ≥ŸÉÿßŸÜ ÿ®ŸÜÿß', description: '', price: 25, image: 'https://via.placeholder.com/300x150/8a2be2/fff?text=Mexicana+Pasta' },
      // ÿ¨ŸàÿßŸÜÿ® (Sides)
      { id: 8, category: 'ÿ¨ŸàÿßŸÜÿ®', name: 'ÿ®ÿ∑ÿßÿ∑ÿ≥ ÿ®ÿßŸÑÿ¨ÿ®ŸÜÿ©', description: '', price: 15, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Cheese+Fries' },
      { id: 9, category: 'ÿ¨ŸàÿßŸÜÿ®', name: 'ÿ®ÿ∑ÿßÿ∑ÿ≥ ŸàŸäÿØÿ¨ÿ≤', description: '', price: 10, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Wedges' },
      { id: 10, category: 'ÿ¨ŸàÿßŸÜÿ®', name: 'ŸàÿßŸà ŸÅÿ±ÿßŸäÿ≤ ÿØÿ¨ÿßÿ¨', description: '', price: 26, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Wow+Fries+Chicken' },
      { id: 11, category: 'ÿ¨ŸàÿßŸÜÿ®', name: 'ŸàÿßŸà ŸÅÿ±ÿßŸäÿ≤ ÿ¨ŸÖÿ®ÿ±Ÿä', description: '', price: 30, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Wow+Fries+Shrimp' },
      { id: 12, category: 'ÿ¨ŸàÿßŸÜÿ®', name: 'ÿ≠ŸÑŸÇÿßÿ™ ÿ®ÿµŸÑ', description: '', price: 10, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Onion+Rings' },
      { id: 13, category: 'ÿ¨ŸàÿßŸÜÿ®', name: 'ŸÉŸäÿ±ŸÑŸä ŸÅÿ±ÿßŸäÿ≤', description: '', price: 9, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Curly+Fries' },
      { id: 14, category: 'ÿ¨ŸàÿßŸÜÿ®', name: 'ÿ®ÿ∑ÿßÿ∑ÿ≥', description: '', price: 8, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=French+Fries' },
      { id: 15, category: 'ÿ¨ŸàÿßŸÜÿ®', name: 'ÿ≥ŸÑÿ∑ÿ© ÿ≥Ÿäÿ≤ÿ±', description: '', price: 14, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Caesar+Salad' },
      { id: 16, category: 'ÿ¨ŸàÿßŸÜÿ®', name: 'ÿ≥ŸÑÿ∑ÿ© ÿÆÿ∂ÿ±ÿßÿ°', description: '', price: 12, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Green+Salad' },
      { id: 17, category: 'ÿ¨ŸàÿßŸÜÿ®', name: 'ÿ£ÿµÿßÿ®ÿπ ŸÖŸàÿ≤ÿßÿ±ŸäŸÑÿß', description: '', price: 13, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Mozzarella+Sticks' },
      { id: 18, category: 'ÿ¨ŸàÿßŸÜÿ®', name: '4 ÿ£ÿ¨ŸÜÿ≠ÿ© ÿØÿ¨ÿßÿ¨', description: '', price: 14, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Chicken+Wings' },
      { id: 19, category: 'ÿ¨ŸàÿßŸÜÿ®', name: '8 ÿ£ÿ¨ŸÜÿ≠ÿ© ÿØÿ¨ÿßÿ¨', description: '', price: 27, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Chicken+Wings' },
      { id: 20, category: 'ÿ¨ŸàÿßŸÜÿ®', name: 'ŸÉŸàŸÉŸäÿ≤', description: '', price: 6, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Cookies' },
      // ÿØÿ¨ÿßÿ¨ TCB
      { id: 21, category: 'ÿØÿ¨ÿßÿ¨ TCB', name: 'ÿµÿØŸàÿ± ÿØÿ¨ÿßÿ¨ ÿ™Ÿä ÿ≥Ÿä ÿ®Ÿä ÿØÿßŸäŸÜÿßŸÖŸäÿ™ ÿ¨ÿ®ŸÜ', description: '', sizes: [{name: 'ÿπÿßÿØŸä', price: 16}, {name: 'ÿØÿ®ŸÑ', price: 22}], image: 'https://via.placeholder.com/300x150/ff0000/fff?text=Dynamite+Chicken' },
      { id: 22, category: 'ÿØÿ¨ÿßÿ¨ TCB', name: 'ÿ£ÿµÿßÿ®ÿπ ÿØÿ¨ÿßÿ¨ ÿ™Ÿä ÿ≥Ÿä ÿ®Ÿä ÿØÿßŸäŸÜÿßŸÖŸäÿ™ ÿ¨ÿ®ŸÜ', description: '', sizes: [{name: 'ÿπÿßÿØŸä', price: 16}, {name: 'ÿØÿ®ŸÑ', price: 22}], image: 'https://via.placeholder.com/300x150/ff0000/fff?text=Dynamite+Tender' },
      { id: 23, category: 'ÿØÿ¨ÿßÿ¨ TCB', name: 'ÿØÿßŸäŸÜÿßŸÖŸäÿ™ ÿ™Ÿä ÿ≥Ÿä ÿ®Ÿä ÿµÿØŸàÿ± ÿØÿ¨ÿßÿ¨', description: '', sizes: [{name: 'ÿπÿßÿØŸä', price: 16}, {name: 'ÿØÿ®ŸÑ', price: 22}], image: 'https://via.placeholder.com/300x150/ff0000/fff?text=Dynamite+Chicken' },
      { id: 24, category: 'ÿØÿ¨ÿßÿ¨ TCB', name: 'ÿØÿßŸäŸÜÿßŸÖŸäÿ™ ÿ™Ÿä ÿ≥Ÿä ÿ®Ÿä ÿ£ÿµÿßÿ®ÿπ ÿØÿ¨ÿßÿ¨', description: '', sizes: [{name: 'ÿπÿßÿØŸä', price: 16}, {name: 'ÿØÿ®ŸÑ', price: 22}], image: 'https://via.placeholder.com/300x150/ff0000/fff?text=Dynamite+Tender' },
      { id: 25, category: 'ÿØÿ¨ÿßÿ¨ TCB', name: 'ŸÅÿ±ŸÜÿ≥Ÿä ÿ™Ÿä ÿ≥Ÿä ÿ®Ÿä ÿµÿØŸàÿ± ÿØÿ¨ÿßÿ¨', description: '', sizes: [{name: 'ÿπÿßÿØŸä', price: 16}, {name: 'ÿØÿ®ŸÑ', price: 22}], image: 'https://via.placeholder.com/300x150/ff0000/fff?text=French+Chicken' },
      { id: 26, category: 'ÿØÿ¨ÿßÿ¨ TCB', name: 'ŸÅÿ±ŸÜÿ≥Ÿä ÿ™Ÿä ÿ≥Ÿä ÿ®Ÿä ÿ£ÿµÿßÿ®ÿπ ÿØÿ¨ÿßÿ¨', description: '', sizes: [{name: 'ÿπÿßÿØŸä', price: 16}, {name: 'ÿØÿ®ŸÑ', price: 22}], image: 'https://via.placeholder.com/300x150/ff0000/fff?text=French+Tender' },
      { id: 27, category: 'ÿØÿ¨ÿßÿ¨ TCB', name: 'ÿ±ÿßŸÜÿ¥ ÿ™Ÿä ÿ≥Ÿä ÿ®Ÿä ÿ£ÿµÿßÿ®ÿπ ÿØÿ¨ÿßÿ¨', description: '', sizes: [{name: 'ÿπÿßÿØŸä', price: 16}, {name: 'ÿØÿ®ŸÑ', price: 22}], image: 'https://via.placeholder.com/300x150/ff0000/fff?text=Ranch+Tender' },
      { id: 28, category: 'ÿØÿ¨ÿßÿ¨ TCB', name: 'ÿ±ÿßŸÜÿ¥ ÿ™Ÿä ÿ≥Ÿä ÿ®Ÿä ÿµÿØŸàÿ± ÿØÿ¨ÿßÿ¨', description: '', sizes: [{name: 'ÿπÿßÿØŸä', price: 16}, {name: 'ÿØÿ®ŸÑ', price: 22}], image: 'https://via.placeholder.com/300x150/ff0000/fff?text=Ranch+Chicken' },
      { id: 29, category: 'ÿØÿ¨ÿßÿ¨ TCB', name: 'ÿ™Ÿä ÿ≥Ÿä ÿ®Ÿä ÿ®ÿßÿ±ÿ®ŸÉŸäŸà ÿµÿØŸàÿ± ÿØÿ¨ÿßÿ¨', description: '', sizes: [{name: 'ÿπÿßÿØŸä', price: 16}, {name: 'ÿØÿ®ŸÑ', price: 22}], image: 'https://via.placeholder.com/300x150/ff0000/fff?text=BBQ+Chicken' },
      { id: 30, category: 'ÿØÿ¨ÿßÿ¨ TCB', name: 'ÿ™Ÿä ÿ≥Ÿä ÿ®Ÿä ÿ®ÿßÿ±ÿ®ŸÉŸäŸà ÿ£ÿµÿßÿ®ÿπ ÿØÿ¨ÿßÿ¨', description: '', sizes: [{name: 'ÿπÿßÿØŸä', price: 16}, {name: 'ÿØÿ®ŸÑ', price: 22}], image: 'https://via.placeholder.com/300x150/ff0000/fff?text=BBQ+Tender' },
      // ÿ®Ÿäÿ™ÿ≤ÿß (Pizza)
      { id: 31, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿ≥ÿßŸÖŸàŸÉŸä', description: 'ÿØÿ¨ÿßÿ¨ ŸÖÿ¥ŸàŸä + ÿµŸÑÿµÿ© ÿ≥ŸÖŸàŸÉŸä + ŸÅŸÑŸÅŸÑ ÿßÿÆÿ∂ÿ± + ŸÅŸÑŸÅŸÑ ÿßÿµŸÅÿ± + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß', sizes: [{name: 'S', price: 23}, {name: 'M', price: 35}, {name: 'L', price: 41}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Samoky+Pizza' },
      { id: 32, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿ™ŸÉÿß ÿ®Ÿäÿ™ÿ≤ÿß', description: 'ÿØÿ¨ÿßÿ¨ ÿßŸÑÿ™ŸÉÿß ÿßŸÑŸÖÿ¥ŸàŸä + ÿµŸàÿµ ÿßŸÑÿ™ŸÉÿß + ÿßŸÑŸÅŸÑŸÅŸÑ ÿßŸÑÿ£ÿÆÿ∂ÿ± + ÿßŸÑÿ®ÿµŸÑ + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß', sizes: [{name: 'S', price: 21}, {name: 'M', price: 33}, {name: 'L', price: 43}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Tikka+Pizza' },
      { id: 33, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿ®Ÿäÿ±Ÿä ÿ®Ÿäÿ±Ÿä', description: 'ÿØÿ¨ÿßÿ¨ ÿ™ÿ™ÿ±ÿß ÿßŸÑŸÖÿ¥ŸàŸä + ÿµŸàÿµ ÿßŸÑÿ®ÿ±Ÿä ÿ®Ÿäÿ±Ÿä ÿßŸÑÿ≠ÿßÿ± + ÿ®ÿµŸÑ + ŸÅŸÑŸÅŸÑ ÿßÿ≠ŸÖÿ± + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß', sizes: [{name: 'S', price: 21}, {name: 'M', price: 33}, {name: 'L', price: 43}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Peri+Peri+Pizza' },
      { id: 34, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿ±ÿßŸÜÿ¥ ŸÅÿßŸäÿ±', description: 'ÿØÿ¨ÿßÿ¨ ÿßŸÑÿ±ÿßŸÜÿ¥ + ÿµŸÑÿµÿ© ÿßŸÑÿ±ÿßŸÜÿ¥ ÿßŸÑÿ≠ÿßÿ±ÿ© + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß', sizes: [{name: 'S', price: 21}, {name: 'M', price: 33}, {name: 'L', price: 43}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Ranch+Fire' },
      { id: 35, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ŸÖŸäŸÉÿ≥ŸäŸÉÿßŸÜ ÿ≥ÿ®ÿßŸäÿ≥Ÿä', description: 'ÿØÿ¨ÿßÿ¨ ÿ™ÿ™ÿ±ÿß ÿßŸÑŸÖÿ¥ŸàŸä + ÿµŸÑÿµÿ© ÿ™ÿ™ÿ±ÿß ÿßŸÑÿ≠ÿßÿ±ÿ© + ŸÅŸÑŸÅŸÑ ÿßÿÆÿ∂ÿ± + ŸáŸÑÿßÿ®ŸäŸÜŸà + ÿ®ÿµŸÑ + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß + ÿ∑ŸÖÿßÿ∑ŸÖ', sizes: [{name: 'S', price: 18}, {name: 'M', price: 30}, {name: 'L', price: 40}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Mexican+Spicy' },
      { id: 36, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ŸÅÿßŸáŸäÿ™ÿß ÿØÿ¨ÿßÿ¨', description: 'ÿØÿ¨ÿßÿ¨ ŸÅÿßŸáŸäÿ™ÿß + ÿµŸÑÿµÿ© ÿ™ÿ™ÿ±ÿß ÿßŸÑÿÆÿßÿµÿ© + ŸÅŸÑŸÅŸÑ ÿßÿÆÿ∂ÿ± + ŸÖÿ¥ÿ±ŸàŸÖ + ÿ®ÿµŸÑ + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß', sizes: [{name: 'S', price: 18}, {name: 'M', price: 30}, {name: 'L', price: 40}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Fajita+Chicken' },
      { id: 37, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿ¥ÿßŸàÿ±ŸÖÿß', description: 'ÿµŸÑÿµÿ© ÿ¥ÿßŸàÿ±ŸÖÿß + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß + ÿØÿ¨ÿßÿ¨ ÿ¥ÿßŸàÿ±ŸÖÿß ÿ™ÿ™ÿ±ÿß + ŸÅŸÑŸÅŸÑ ÿßÿ≠ŸÖÿ± + ŸÖÿÆŸÑŸÑ', sizes: [{name: 'S', price: 19}, {name: 'M', price: 31}, {name: 'L', price: 41}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Shawarma+Pizza' },
      { id: 38, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿ±ÿßŸÜÿ¥ ÿ™ÿ¥ŸäŸÉŸÜ', description: 'ÿØÿ¨ÿßÿ¨ ÿßŸÑÿ±ÿßŸÜÿ¥ + ÿµŸÑÿµÿ© ÿßŸÑÿ±ÿßŸÜÿ¥ + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß', sizes: [{name: 'S', price: 20}, {name: 'M', price: 31}, {name: 'L', price: 41}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Ranch+Chicken+Pizza' },
      { id: 39, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿ™ÿ™ÿ±ÿß ŸÉŸàŸäŸÜ', description: 'ŸÇÿ∑ÿπ ÿØÿ¨ÿßÿ¨ + ÿµŸÑÿµÿ© ÿ™ÿ™ÿ±ÿß ÿßŸÑÿÆÿßÿµÿ© + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß', sizes: [{name: 'S', price: 21}, {name: 'M', price: 32}, {name: 'L', price: 43}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Tetra+Queen' },
      { id: 40, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿßŸÉÿ≥ÿ™ÿ±ÿß ÿ≥Ÿàÿ®ÿ±ŸäŸÖ', description: 'ÿµŸÑÿµÿ© ÿ™ÿ™ÿ±ÿß + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß + ÿ≤Ÿäÿ™ŸàŸÜ ÿßÿ≥ŸàÿØ + ŸÅŸÑŸÅŸÑ ÿßÿÆÿ∂ÿ± + ŸÖÿ¥ÿ±ŸàŸÖ + ŸÇÿ∑ÿπ ŸÑÿ≠ŸÖ + ÿ®ÿµŸÑ + ÿ®ÿ®ÿ±ŸàŸÜŸä', sizes: [{name: 'S', price: 21}, {name: 'M', price: 31}, {name: 'L', price: 41}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Extra+Supreme' },
      { id: 41, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ŸÅÿ±ŸÜÿ¥ ÿ®Ÿäÿ™ÿ≤ÿß', description: 'ÿØÿ¨ÿßÿ¨ ŸÖÿ¥ŸàŸä + ÿµŸÑÿµÿ© ŸÅÿ±ÿßŸÜÿ≥Ÿäÿ© ÿÆÿßÿµÿ© + ŸÅŸÑŸÅŸÑ ÿßÿ≠ŸÖÿ± + ÿ®ÿµŸÑ + ÿ≤Ÿäÿ™ŸàŸÜ ÿßÿ≥ŸàÿØ + ŸÖÿ¥ÿ±ŸàŸÖ + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß', sizes: [{name: 'S', price: 19}, {name: 'M', price: 31}, {name: 'L', price: 41}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=French+Pizza' },
      { id: 42, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿÆÿ∂ÿßÿ±', description: 'ÿµŸÑÿµÿ© ÿ™ÿ™ÿ±ÿß + ŸÅŸÑŸÅŸÑ ÿßÿÆÿ∂ÿ± + ŸÅŸÑŸÅŸÑ ÿßÿµŸÅÿ± + ÿ®ÿµŸÑ + ÿ≤Ÿäÿ™ŸàŸÜ ÿßÿ≥ŸàÿØ + ŸÖÿ¥ÿ±ŸàŸÖ + ÿ∑ŸÖÿßÿ∑ŸÖ + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß', sizes: [{name: 'S', price: 16}, {name: 'M', price: 28}, {name: 'L', price: 28}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Vegetable+Pizza' },
      { id: 43, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿ®ÿßÿ±ÿ®ŸÉŸäŸà ÿØÿ¨ÿßÿ¨', description: 'ÿØÿ¨ÿßÿ¨ ŸÖÿ¥ŸàŸä + ÿµŸÑÿµÿ© ÿßŸÑÿ®ÿßÿ±ÿ®ŸÉŸäŸà + ŸÅŸÑŸÅŸÑ ÿßÿÆÿ∂ÿ± + ŸÅŸÑŸÅŸÑ ÿßÿµŸÅÿ± + ÿ®ÿµŸÑ + ŸÖÿ¥ÿ±ŸàŸÖ + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß', sizes: [{name: 'S', price: 18}, {name: 'M', price: 30}, {name: 'L', price: 40}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=BBQ+Chicken+Pizza' },
      { id: 44, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ŸÖÿßÿ±ÿ∫ÿ±Ÿäÿ™ÿß', description: 'ŸÖŸÉÿ≥ ÿßÿ¨ÿ®ÿßŸÜ ÿ™ÿ™ÿ±ÿß + ÿµŸÑÿµÿ© ÿ™ÿ™ÿ±ÿß ÿßŸÑÿÆÿßÿµÿ©', sizes: [{name: 'S', price: 16}, {name: 'M', price: 28}, {name: 'L', price: 38}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Margherita+Pizza' },
      { id: 45, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿØÿßŸäŸÜŸÖÿßŸäÿ™ ÿØÿ¨ÿßÿ¨', description: 'ÿØŸäŸÜÿßŸÖŸäÿ™ ÿµŸàÿµ + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß + ÿØÿ¨ÿßÿ¨', sizes: [{name: 'S', price: 19}, {name: 'M', price: 29}, {name: 'L', price: 39}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Dynamite+Chicken+Pizza' },
      { id: 46, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿØÿßŸäŸÜŸÖÿßŸäÿ™ ÿ¨ŸÖÿ®ÿ±Ÿä', description: 'ÿØŸäŸÜÿßŸÖŸäÿ™ ÿµŸàÿµ + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß + ÿ¨ŸÖÿ®ÿ±Ÿä', sizes: [{name: 'S', price: 23}, {name: 'M', price: 35}, {name: 'L', price: 45}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Dynamite+Shrimp+Pizza' },
      { id: 47, category: 'ÿ®Ÿäÿ™ÿ≤ÿß', name: 'ÿ®Ÿäÿ®ÿ±ŸàŸÜŸä', description: 'ÿµŸÑÿµÿ© ÿ™ÿ™ÿ±ÿß + ÿ®ÿ®ÿ±ŸàŸÜŸä + ÿ¨ÿ®ŸÜÿ© ÿ™ÿ™ÿ±ÿß', sizes: [{name: 'S', price: 19}, {name: 'M', price: 31}, {name: 'L', price: 41}], image: 'https://via.placeholder.com/300x150/e64a19/fff?text=Pepperoni+Pizza' },
      // ÿµŸàÿµÿßÿ™ (Sauces)
      { id: 48, category: 'ÿµŸàÿµÿßÿ™', name: 'ÿµŸàÿµ ÿØÿßŸäŸÜŸÖÿßŸäÿ™', description: '', price: 2, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Sauce' },
      { id: 49, category: 'ÿµŸàÿµÿßÿ™', name: 'ÿµŸàÿµ ÿ¨ÿ®ŸÜÿ©', description: '', price: 4, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Sauce' },
      { id: 50, category: 'ÿµŸàÿµÿßÿ™', name: 'ÿµŸàÿµ ŸÅÿ±ŸÜÿ¥', description: '', price: 2, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Sauce' },
      { id: 51, category: 'ÿµŸàÿµÿßÿ™', name: 'ÿµŸàÿµ ÿ±ÿßŸÜÿ¥', description: '', price: 2, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Sauce' },
      { id: 52, category: 'ÿµŸàÿµÿßÿ™', name: 'ÿµŸàÿµ ÿ´ŸàŸÖ', description: '', price: 2, image: 'https://via.placeholder.com/300x150/4a4a4a/fff?text=Sauce' },
      // Ÿàÿ¨ÿ®ÿ© ÿ£ÿ∑ŸÅÿßŸÑ (Kids Meal)
      { id: 53, category: 'Ÿàÿ¨ÿ®ÿ© ÿ£ÿ∑ŸÅÿßŸÑ', name: 'Ÿàÿ¨ÿ®ÿ© ÿ£ÿ∑ŸÅÿßŸÑ ÿ¨ÿ®ŸÜ', description: '', price: 15, image: 'https://via.placeholder.com/300x150/f44336/fff?text=Kids+Meal' },
      { id: 54, category: 'Ÿàÿ¨ÿ®ÿ© ÿ£ÿ∑ŸÅÿßŸÑ', name: 'Ÿàÿ¨ÿ®ÿ© ÿ£ÿ∑ŸÅÿßŸÑ ÿÆÿ∂ÿßÿ±', description: '', price: 15, image: 'https://via.placeholder.com/300x150/f44336/fff?text=Kids+Meal' },
      { id: 55, category: 'Ÿàÿ¨ÿ®ÿ© ÿ£ÿ∑ŸÅÿßŸÑ', name: 'Ÿàÿ¨ÿ®ÿ© ÿ£ÿ∑ŸÅÿßŸÑ ÿ®ÿ®ÿ±ŸàŸÜŸä', description: '', price: 15, image: 'https://via.placeholder.com/300x150/f44336/fff?text=Kids+Meal' },
      // ŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™ (Drinks)
      { id: 56, category: 'ŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™', name: 'ŸÖÿßÿ°', description: '', price: 2, image: 'https://via.placeholder.com/300x150/2196F3/fff?text=Water' },
      { id: 57, category: 'ŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™', name: 'ŸÉŸàŸÑÿß', description: '1 ŸÑÿ™ÿ±', price: 8, image: 'https://via.placeholder.com/300x150/2196F3/fff?text=Cola' },
      { id: 58, category: 'ŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™', name: 'ŸÉŸàŸÑÿß', description: '2.25 ŸÑÿ™ÿ±', price: 12, image: 'https://via.placeholder.com/300x150/2196F3/fff?text=Cola' },
      { id: 59, category: 'ŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™', name: 'ŸÉŸàŸÑÿß', description: 'ÿπŸÑÿ®ÿ©', price: 4, image: 'https://via.placeholder.com/300x150/2196F3/fff?text=Cola' },
      { id: 60, category: 'ŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™', name: 'ÿ≥Ÿäÿ≤ÿ±', description: 'ÿπŸÑÿ®ÿ©', price: 4, image: 'https://via.placeholder.com/300x150/2196F3/fff?text=Caeser' },
      { id: 61, category: 'ŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™', name: 'ÿ±ÿ®Ÿäÿπ', description: 'ÿπŸÑÿ®ÿ©', price: 3, image: 'https://via.placeholder.com/300x150/2196F3/fff?text=Rabie' }
    ];

    const menuContainer = document.getElementById("menu");
    const cartContainer = document.getElementById("cart-items");
    const tabsContainer = document.getElementById("category-tabs");
    let cart = [];
    let checkoutStep = 0;
    let currentCategory = 'ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿµŸÜÿßŸÅ'; // Default to show all

    function getUniqueCategories() {
        const categories = [...new Set(menuData.map(item => item.category))];
        return ['ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿµŸÜÿßŸÅ', ...categories];
    }

    function renderTabs() {
        const categories = getUniqueCategories();
        tabsContainer.innerHTML = '';
        categories.forEach(category => {
            const button = document.createElement("button");
            button.innerText = category;
            button.className = (category === currentCategory) ? 'active' : '';
            button.onclick = () => filterMenu(category);
            tabsContainer.appendChild(button);
        });
    }

    function filterMenu(category) {
        currentCategory = category;
        renderTabs();
        renderMenu();
    }

    function renderMenu() {
        menuContainer.innerHTML = "";
        let filteredItems = menuData;
        if (currentCategory !== 'ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿµŸÜÿßŸÅ') {
            filteredItems = menuData.filter(item => item.category === currentCategory);
        }

        filteredItems.forEach(item => {
            const div = document.createElement("div");
            div.className = "item";
            const isSizeBased = item.sizes !== undefined;
            
            let actionsHTML = '';
            if (isSizeBased) {
              actionsHTML = `<div class="size-buttons">`;
              item.sizes.forEach(size => {
                const cartItemId = `${item.id}-${size.name}`;
                const inCart = cart.find(c => c.id === cartItemId);
                if (inCart) {
                  actionsHTML += `
                    <div style="display: flex; align-items: center; gap: 0.25rem;">
                        <button class="qty-btn" onclick="changeQty('${cartItemId}', -1)">-</button>
                        <span>${inCart.qty}</span>
                        <button class="qty-btn" onclick="changeQty('${cartItemId}', 1)">+</button>
                    </div>
                  `;
                } else {
                  actionsHTML += `<button onclick="addWithSize(${item.id}, '${size.name}', ${size.price})">${size.name} (${size.price} ÿ±ŸäÿßŸÑ)</button>`;
                }
              });
              actionsHTML += `</div>`;
            } else {
              const inCart = cart.find(c => c.id === item.id);
              if (inCart) {
                actionsHTML = `
                  <button class="qty-btn" onclick="changeQty(${item.id}, -1)">-</button>
                  <span>${inCart.qty}</span>
                  <button class="qty-btn" onclick="changeQty(${item.id}, 1)">+</button>
                `;
              } else {
                actionsHTML = `<button onclick="addToCart(${item.id})">ÿ£ÿ∂ŸÅ ŸÑŸÑÿ≥ŸÑÿ©</button>`;
              }
            }
            
            div.innerHTML = `
              <img src="${item.image || 'https://via.placeholder.com/300x150'}" alt="${item.name}" />
              <h3>${item.name}</h3>
              <p>${item.description}</p>
              ${!isSizeBased ? `<p class="price">${item.price} ÿ±ŸäÿßŸÑ</p>` : ''}
              <div class="actions">
                ${actionsHTML}
              </div>
            `;
            menuContainer.appendChild(div);
        });
    }

    function addWithSize(id, sizeName, price) {
        const item = menuData.find(m => m.id === id);
        
        const cartItemId = `${id}-${sizeName}`;
        const found = cart.find(c => c.id === cartItemId);
        
        if (found) {
            found.qty++;
        } else {
            cart.push({
                id: cartItemId,
                name: `${item.name} (${sizeName})`,
                baseId: id,
                price: price,
                qty: 1
            });
        }
        renderCart();
        renderMenu();
    }

    function addToCart(id){
      const item = menuData.find(m => m.id === id);
      if (!item) return;
      const found = cart.find(c => c.id === id);
      if(found){
        found.qty++;
      } else {
        cart.push({...item, qty:1});
      }
      renderCart();
      renderMenu();
    }

    function changeQty(id, delta){
      const found = cart.find(c => c.id == id);
      if(found){
        found.qty += delta;
        if(found.qty <= 0){
          cart = cart.filter(c => c.id != id);
        }
      }
      renderMenu();
      renderCart();
    }

    function removeFromCart(id){
      cart = cart.filter(c => c.id != id);
      renderMenu();
      renderCart();
    }

    function renderCart(){
      cartContainer.innerHTML = '';
      let total = 0;
      cart.forEach(c => {
        const div = document.createElement("div");
        div.className = "cart-item";
        div.innerHTML = `
          <span>${c.name} x${c.qty} (${c.price} ÿ±ŸäÿßŸÑ)</span>
          <button onclick="removeFromCart('${c.id}')">ÿ≠ÿ∞ŸÅ</button>
        `;
        cartContainer.appendChild(div);
        total += c.price * c.qty;
      });

      const totalDiv = document.createElement("div");
      totalDiv.style.marginTop = "1rem";
      totalDiv.style.fontWeight = "bold";
      totalDiv.innerText = "ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä: " + total + " ÿ±ŸäÿßŸÑ";
      cartContainer.appendChild(totalDiv);

      renderMenu();
    }

    function toggleCart(){
      document.getElementById("cart").classList.toggle("open");
    }
    
    if (tg) {
      tg.onEvent('mainButtonClicked', () => {
        if (document.getElementById("cart").classList.contains("open")) {
          toggleCart();
        }
      });
    }

    function getChatId() {
      const fromTG = window.Telegram?.WebApp?.initDataUnsafe?.user?.id ?? null;
      if (fromTG) return Number(fromTG);
      const params = new URLSearchParams(location.search);
      const fromURL = params.get('chat_id');
      return fromURL ? Number(fromURL) : null;
    }

    function sanitizeCartItems(items) {
      return items.map(i => {
        const priceNum = Number(i.price || 0);
        const qtyNum = Number(i.qty || 0);
        return { name: i.name, price: priceNum, qty: qtyNum };
      });
    }

    async function checkout(){
      if(cart.length === 0){
        alert("ÿßŸÑÿ≥ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ©!");
        return;
      }

      if(checkoutStep === 0){
        toggleCart();
        checkoutStep = 1;
        return;
      }

      if(!window.Telegram?.WebApp){
        alert("‚ö†Ô∏è ÿßŸÅÿ™ÿ≠ ÿßŸÑŸÖŸÜŸäŸà ŸÖŸÜ ÿØÿßÿÆŸÑ ÿ™ŸäŸÑŸäÿ¨ÿ±ÿßŸÖ ÿπÿ®ÿ± ÿ≤ÿ± ÿßŸÑÿ®Ÿàÿ™.");
        return;
      }

      const chat_id = getChatId();
      const cleanItems = sanitizeCartItems(cart);
      const total = cleanItems.reduce((s,c) => s + (c.price * c.qty), 0);

      const payload = {
        items: cleanItems,
        total,
        time: new Date().toISOString(),
        chat_id,
        source: "webapp"
      };

      try {
        const res = await fetch("https://s9188.app.n8n.cloud/webhook/cart_submit", {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify(payload)
        });

        if(res.ok){
          alert("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ");
          try { window.Telegram.WebApp.close(); } catch(_) {}
          cart = [];
          renderMenu();
          renderCart();
          checkoutStep = 0;
        } else {
          const t = await res.text();
          alert("‚ö†Ô∏è ŸÅÿ¥ŸÑ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ\n" + t);
        }
      } catch (err) {
        alert("‚ùå Load failed: ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ");
      }
    }

    renderTabs();
    renderMenu();
  </script>
</body>
</html>