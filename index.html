<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù…Ù†ÙŠÙˆ ØªØªØ±Ø§ Ø¨ÙŠØªØ²Ø§</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f7f7f7;
      margin: 0;
      padding: 0;
      color: #333;
      overflow-x: hidden;
    }
    header {
      background: #4a4a4a;
      padding: 1rem;
      text-align: center;
      font-size: 1.8rem;
      font-weight: bold;
      color: #fff;
      position: relative;
    }
    .checkout-global {
      position: sticky;
      top: 0;
      z-index: 10;
      background: #2a2a2a;
      text-align: center;
      padding: 0.5rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .checkout-global button {
      background: #ff5722;
      color: #fff;
      padding: 0.8rem 1.2rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: bold;
      transition: background 0.3s ease;
    }
    .checkout-global button:hover {
      background: #e64a19;
    }
    .category-tabs {
      position: sticky;
      top: 70px; /* Ø¹Ø¯Ù‘Ù„Ù‡Ø§ Ø¥Ø°Ø§ ØªØºÙŠÙ‘Ø± Ø§Ø±ØªÙØ§Ø¹ Ø´Ø±ÙŠØ· Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ */
      z-index: 9;
      background-color: #fff;
      padding: 0.75rem 0.5rem;
      border-bottom: 1px solid #ddd;
      display: flex;
      justify-content: flex-start;
      gap: 0.5rem;
      overflow-x: auto;
      white-space: nowrap;
      -webkit-overflow-scrolling: touch;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .category-tabs::-webkit-scrollbar { display: none; }
    .category-tabs button {
      background-color: #f0f0f0;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 500;
      color: #555;
      transition: background-color 0.2s ease, transform 0.2s ease;
      flex-shrink: 0;
    }
    .category-tabs button.active {
      background-color: #2196F3;
      color: #fff;
      font-weight: bold;
      transform: scale(1.05);
    }
    .menu {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
      padding: 1.5rem;
    }
    .item {
      background: #fff;
      border-radius: 12px;
      padding: 1.2rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .item:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    }
    .item img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 12px;
      margin-bottom: 0.75rem;
    }
    .item h3 { font-size: 1.2rem; margin: 0.5rem 0 0.25rem; font-weight: 600; }
    .item p { font-size: 0.9rem; margin: 0.2rem 0; color: #666; }
    .item .price { font-size: 1.1rem; font-weight: bold; color: #e64a19; margin-top: auto; }
    .item .actions { display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-top: 1rem; }
    .item .size-buttons {
      display: flex; justify-content: space-around; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap;
    }
    .item .size-buttons button {
      flex: 1 1 80px; padding: 0.6rem; background: #f0f0f0; color: #333; border: 1px solid #ddd;
      border-radius: 6px; cursor: pointer; font-size: 0.9rem; font-weight: bold; transition: all 0.2s ease;
    }
    .item .size-buttons button:hover { background: #e0e0e0; border-color: #bbb; }
    .item button {
      padding: 0.8rem 1rem; background: #2196F3; color: #fff; border: none; border-radius: 8px;
      cursor: pointer; font-size: 1rem; font-weight: bold; transition: background 0.3s ease;
    }
    .item button:hover { background: #1976D2; }
    .item .qty-btn { background: #2196F3; padding: 0.6rem 1rem; font-size: 1.2rem; font-weight: bold; }

    .cart {
      position: fixed;
      top: 0;
      right: -450px;
      width: 400px;
      max-width: 90%;
      height: 100%;
      background: #fff;
      box-shadow: -4px 0 10px rgba(0,0,0,0.1);
      padding: 1.5rem;
      transition: right 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
      display: flex;
      flex-direction: column;
      z-index: 100;
    }
    .cart.open { right: 0; }

    /* Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø³Ù„Ø© Ù„Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ ÙˆØ§Ù„Ø¹Ù†ÙˆØ§Ù† */
    .cart-topbar {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
      border-bottom: 2px solid #eee;
      padding-bottom: 0.5rem;
    }
    .cart-topbar h2 {
      margin: 0;
      font-size: 1.3rem;
      flex: 1;
    }
    .cart-back-btn {
      background:#2196F3;
      color:#fff;
      padding:0.5rem 0.9rem;
      border:none;
      border-radius:6px;
      cursor:pointer;
      font-weight:bold;
      font-size:0.95rem;
      white-space: nowrap;
    }

    .cart-items { flex: 1; overflow-y: auto; padding: 0.5rem 0; }
    .cart-item {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 1rem; padding: 0.75rem; background: #f9f9f9; border-radius: 8px;
    }
    .cart-item span { flex: 1; }
    .cart-item button {
      background: #f44336; border: none; color: #fff; padding: 0.4rem 0.8rem; border-radius: 6px; cursor: pointer; font-size: 0.9rem;
    }

    .cart-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #ff5722;
      color: #fff;
      width: 55px;
      height: 55px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      font-size: 1.8rem;
      z-index: 50;
    }
  </style>
</head>
<body>
  <header>Ù…Ù†ÙŠÙˆ ØªØªØ±Ø§ Ø¨ÙŠØªØ²Ø§</header>
  
  <div class="checkout-global">
    <button onclick="checkout()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
  </div>

  <div class="category-tabs" id="category-tabs"></div>
  <div class="menu" id="menu"></div>

  <div class="cart" id="cart">
    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø³Ù„Ø©: Ø²Ø± Ø§Ù„Ø±Ø¬ÙˆØ¹ + Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
    <div class="cart-topbar">
      <button class="cart-back-btn" onclick="toggleCart()">â† Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…Ù†ÙŠÙˆ</button>
      <h2>Ø§Ù„Ø³Ù„Ø©</h2>
    </div>

    <div class="checkout-global">
      <button onclick="checkout()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
    </div>

    <div class="cart-items" id="cart-items"></div>
  </div>

  <div class="cart-toggle" onclick="toggleCart()">ğŸ›’</div>
  
  <script>
    const tg = (window.Telegram && window.Telegram.WebApp) ? window.Telegram.WebApp : null;
    if (tg) { try { tg.ready(); tg.expand(); } catch(_){} }

    const menuData = [
      // Ø¹Ø±ÙˆØ¶ (Offers)
      { id: 1, category: 'Ø¹Ø±ÙˆØ¶', name: 'Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙˆØ³Ø·', description: '', price: 65, image: '36.jpg' },
      { id: 2, category: 'Ø¹Ø±ÙˆØ¶', name: 'Ø¹Ø±Ø¶ Ø§Ù„ÙƒØ¨ÙŠØ±', description: '', price: 99, image: '37.jpg' },
      { id: 3, category: 'Ø¹Ø±ÙˆØ¶', name: 'Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ø§Ø¦Ù„ÙŠ', description: '', price: 139, image: '38.jpg' },
      // Ø¨Ø§Ø³ØªØ§ (Pasta)
      { id: 4, category: 'Ø¨Ø§Ø³ØªØ§', name: 'Ø¨ÙŠØ³ØªÙˆ Ø¨Ø§Ø³ØªØ§', description: '', price: 30, image: 'bestobasta.jpg' },
      { id: 5, category: 'Ø¨Ø§Ø³ØªØ§', name: 'ÙÙŠØªÙˆØªØ´ÙŠÙ†ÙŠ Ø¨Ø§Ø³ØªØ§', description: '', price: 25, image: 'fotytshenebasta.jpg' },
      { id: 6, category: 'Ø¨Ø§Ø³ØªØ§', name: 'Ù„Ø§Ø²Ø§Ù†ÙŠØ§', description: '', price: 27, image: 'lazanya.jpg' },
      { id: 7, category: 'Ø¨Ø§Ø³ØªØ§', name: 'Ù…ÙŠÙƒØ³ÙƒØ§Ù† Ø¨Ù†Ø§', description: '', price: 25, image: 'maxicanbana.jpg' },
      // Ø¬ÙˆØ§Ù†Ø¨ (Sides)
      { id: 8, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: 'Ø¨Ø·Ø§Ø·Ø³ Ø¨Ø§Ù„Ø¬Ø¨Ù†Ø©', description: '', price: 15, image: 'chessfrise.jpg' },
      { id: 9, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: 'Ø¨Ø·Ø§Ø·Ø³ ÙˆÙŠØ¯Ø¬Ø²', description: '', price: 10, image: 'wedges.jpg' },
      { id: 10, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: 'ÙˆØ§Ùˆ ÙØ±Ø§ÙŠØ² Ø¯Ø¬Ø§Ø¬', description: '', price: 26, image: 'wowfrise.jpg' },
      { id: 11, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: 'ÙˆØ§Ùˆ ÙØ±Ø§ÙŠØ² Ø¬Ù…Ø¨Ø±ÙŠ', description: '', price: 30, image: 'wowfrise.jpg' },
      { id: 12, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: 'Ø­Ù„Ù‚Ø§Øª Ø¨ØµÙ„', description: '', price: 10, image: 'circleonion.jpg' },
      { id: 13, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: 'ÙƒÙŠØ±Ù„ÙŠ ÙØ±Ø§ÙŠØ²', description: '', price: 9, image: 'kerle.jpg' },
      { id: 14, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: 'Ø¨Ø·Ø§Ø·Ø³', description: '', price: 8, image: 'frise.jpg' },
      { id: 15, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: 'Ø³Ù„Ø·Ø© Ø³ÙŠØ²Ø±', description: '', price: 14, image: 'salath.jpg' },
      { id: 16, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: 'Ø³Ù„Ø·Ø© Ø®Ø¶Ø±Ø§Ø¡', description: '', price: 12, image: 'salath.jpg' },
      { id: 17, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: 'Ø£ØµØ§Ø¨Ø¹ Ù…ÙˆØ²Ø§Ø±ÙŠÙ„Ø§', description: '', price: 13, image: 'mozorela.jpg' },
      { id: 18, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: '4 Ø£Ø¬Ù†Ø­Ø© Ø¯Ø¬Ø§Ø¬', description: '', price: 14, image: 'ckicenwings.jpg' },
      { id: 19, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: '8 Ø£Ø¬Ù†Ø­Ø© Ø¯Ø¬Ø§Ø¬', description: '', price: 27, image: 'ckicenwings.jpg' },
      { id: 20, category: 'Ø¬ÙˆØ§Ù†Ø¨', name: 'ÙƒÙˆÙƒÙŠØ²', description: '', price: 6, image: 'cokies.jpg' },
      // Ø¯Ø¬Ø§Ø¬ TCB
      { id: 21, category: 'Ø¯Ø¬Ø§Ø¬ TCB', name: 'ØµØ¯ÙˆØ± Ø¯Ø¬Ø§Ø¬ ØªÙŠ Ø³ÙŠ Ø¨ÙŠ Ø¯Ø§ÙŠÙ†Ø§Ù…ÙŠØª Ø¬Ø¨Ù†', description: '', sizes: [{name: 'Ø¹Ø§Ø¯ÙŠ', price: 16}, {name: 'Ø¯Ø¨Ù„', price: 22}], image: 'tcbdenametchees.jpg' },
      { id: 22, category: 'Ø¯Ø¬Ø§Ø¬ TCB', name: 'Ø£ØµØ§Ø¨Ø¹ Ø¯Ø¬Ø§Ø¬ ØªÙŠ Ø³ÙŠ Ø¨ÙŠ Ø¯Ø§ÙŠÙ†Ø§Ù…ÙŠØª Ø¬Ø¨Ù†', description: '', sizes: [{name: 'Ø¹Ø§Ø¯ÙŠ', price: 16}, {name: 'Ø¯Ø¨Ù„', price: 22}], image: 'tcbdenametchees.jpg' },
      { id: 23, category: 'Ø¯Ø¬Ø§Ø¬ TCB', name: 'Ø¯Ø§ÙŠÙ†Ø§Ù…ÙŠØª ØªÙŠ Ø³ÙŠ Ø¨ÙŠ ØµØ¯ÙˆØ± Ø¯Ø¬Ø§Ø¬', description: '', sizes: [{name: 'Ø¹Ø§Ø¯ÙŠ', price: 16}, {name: 'Ø¯Ø¨Ù„', price: 22}], image: 'tcbdenamet.jpg' },
      { id: 24, category: 'Ø¯Ø¬Ø§Ø¬ TCB', name: 'Ø¯Ø§ÙŠÙ†Ø§Ù…ÙŠØª ØªÙŠ Ø³ÙŠ Ø¨ÙŠ Ø£ØµØ§Ø¨Ø¹ Ø¯Ø¬Ø§Ø¬', description: '', sizes: [{name: 'Ø¹Ø§Ø¯ÙŠ', price: 16}, {name: 'Ø¯Ø¨Ù„', price: 22}], image: 'tcbdenamet.jpg' },
      { id: 25, category: 'Ø¯Ø¬Ø§Ø¬ TCB', name: 'ÙØ±Ù†Ø³ÙŠ ØªÙŠ Ø³ÙŠ Ø¨ÙŠ ØµØ¯ÙˆØ± Ø¯Ø¬Ø§Ø¬', description: '', sizes: [{name: 'Ø¹Ø§Ø¯ÙŠ', price: 16}, {name: 'Ø¯Ø¨Ù„', price: 22}], image: 'tcbfreanch.jpg' },
      { id: 26, category: 'Ø¯Ø¬Ø§Ø¬ TCB', name: 'ÙØ±Ù†Ø³ÙŠ ØªÙŠ Ø³ÙŠ Ø¨ÙŠ Ø£ØµØ§Ø¨Ø¹ Ø¯Ø¬Ø§Ø¬', description: '', sizes: [{name: 'Ø¹Ø§Ø¯ÙŠ', price: 16}, {name: 'Ø¯Ø¨Ù„', price: 22}], image: 'tcbfreanch.jpg' },
      { id: 27, category: 'Ø¯Ø¬Ø§Ø¬ TCB', name: 'Ø±Ø§Ù†Ø´ ØªÙŠ Ø³ÙŠ Ø¨ÙŠ Ø£ØµØ§Ø¨Ø¹ Ø¯Ø¬Ø§Ø¬', description: '', sizes: [{name: 'Ø¹Ø§Ø¯ÙŠ', price: 16}, {name: 'Ø¯Ø¨Ù„', price: 22}], image: 'tcbranch.jpg' },
      { id: 28, category: 'Ø¯Ø¬Ø§Ø¬ TCB', name: 'Ø±Ø§Ù†Ø´ ØªÙŠ Ø³ÙŠ Ø¨ÙŠ ØµØ¯ÙˆØ± Ø¯Ø¬Ø§Ø¬', description: '', sizes: [{name: 'Ø¹Ø§Ø¯ÙŠ', price: 16}, {name: 'Ø¯Ø¨Ù„', price: 22}], image: 'tcbranch.jpg' },
      { id: 29, category: 'Ø¯Ø¬Ø§Ø¬ TCB', name: 'ØªÙŠ Ø³ÙŠ Ø¨ÙŠ Ø¨Ø§Ø±Ø¨ÙƒÙŠÙˆ ØµØ¯ÙˆØ± Ø¯Ø¬Ø§Ø¬', description: '', sizes: [{name: 'Ø¹Ø§Ø¯ÙŠ', price: 16}, {name: 'Ø¯Ø¨Ù„', price: 22}], image: 'tcbbbq.jpg' },
      { id: 30, category: 'Ø¯Ø¬Ø§Ø¬ TCB', name: 'ØªÙŠ Ø³ÙŠ Ø¨ÙŠ Ø¨Ø§Ø±Ø¨ÙƒÙŠÙˆ Ø£ØµØ§Ø¨Ø¹ Ø¯Ø¬Ø§Ø¬', description: '', sizes: [{name: 'Ø¹Ø§Ø¯ÙŠ', price: 16}, {name: 'Ø¯Ø¨Ù„', price: 22}], image: 'tcbbbq.jpg' },
      // Ø¨ÙŠØªØ²Ø§ (Pizza)
      { id: 31, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ø³Ù…ÙˆÙƒÙŠ', description: 'Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ + ØµÙ„ØµØ© Ø³Ù…ÙˆÙƒÙŠ + ÙÙ„ÙÙ„ Ø§Ø®Ø¶Ø± + ÙÙ„ÙÙ„ Ø§ØµÙØ± + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§', sizes: [{name: 'S', price: 23}, {name: 'M', price: 35}, {name: 'L', price: 41}], image: 'smokepizza.png' },
      { id: 32, category: 'Ø¨ÙŠØªØ²Ø§', name: 'ØªÙƒØ§ Ø¨ÙŠØªØ²Ø§', description: 'Ø¯Ø¬Ø§Ø¬ Ø§Ù„ØªÙƒØ§ Ø§Ù„Ù…Ø´ÙˆÙŠ + ØµÙˆØµ Ø§Ù„ØªÙƒØ§ + Ø§Ù„ÙÙ„ÙÙ„ Ø§Ù„Ø£Ø®Ø¶Ø± + Ø§Ù„Ø¨ØµÙ„ + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§', sizes: [{name: 'S', price: 21}, {name: 'M', price: 33}, {name: 'L', price: 43}], image: 'takapezz.jpg' },
      { id: 33, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ø¨ÙŠØ±ÙŠ Ø¨ÙŠØ±ÙŠ', description: 'Ø¯Ø¬Ø§Ø¬ ØªØªØ±Ø§ Ø§Ù„Ù…Ø´ÙˆÙŠ + ØµÙˆØµ Ø§Ù„Ø¨Ø±ÙŠ Ø¨ÙŠØ±ÙŠ Ø§Ù„Ø­Ø§Ø± + Ø¨ØµÙ„ + ÙÙ„ÙÙ„ Ø§Ø­Ù…Ø± + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§', sizes: [{name: 'S', price: 21}, {name: 'M', price: 33}, {name: 'L', price: 43}], image: 'berebere.jpg' },
      { id: 34, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ø±Ø§Ù†Ø´ ÙØ§ÙŠØ±', description: 'Ø¯Ø¬Ø§Ø¬ Ø§Ù„Ø±Ø§Ù†Ø´ + ØµÙ„ØµØ© Ø§Ù„Ø±Ø§Ù†Ø´ Ø§Ù„Ø­Ø§Ø±Ø© + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§', sizes: [{name: 'S', price: 21}, {name: 'M', price: 33}, {name: 'L', price: 43}], image: 'ranchfire.jpg' },
      { id: 35, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ù…ÙŠÙƒØ³ÙŠÙƒØ§Ù† Ø³Ø¨Ø§ÙŠØ³ÙŠ', description: 'Ø¯Ø¬Ø§Ø¬ ØªØªØ±Ø§ Ø§Ù„Ù…Ø´ÙˆÙŠ + ØµÙ„ØµØ© ØªØªØ±Ø§ Ø§Ù„Ø­Ø§Ø±Ø© + ÙÙ„ÙÙ„ Ø§Ø®Ø¶Ø± + Ù‡Ù„Ø§Ø¨ÙŠÙ†Ùˆ + Ø¨ØµÙ„ + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§ + Ø·Ù…Ø§Ø·Ù…', sizes: [{name: 'S', price: 18}, {name: 'M', price: 30}, {name: 'L', price: 40}], image: 'maxicanspyce.jpg' },
      { id: 36, category: 'Ø¨ÙŠØªØ²Ø§', name: 'ÙØ§Ù‡ÙŠØªØ§ Ø¯Ø¬Ø§Ø¬', description: 'Ø¯Ø¬Ø§Ø¬ ÙØ§Ù‡ÙŠØªØ§ + ØµÙ„ØµØ© ØªØªØ±Ø§ Ø§Ù„Ø®Ø§ØµØ© + ÙÙ„ÙÙ„ Ø§Ø®Ø¶Ø± + Ù…Ø´Ø±ÙˆÙ… + Ø¨ØµÙ„ + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§', sizes: [{name: 'S', price: 18}, {name: 'M', price: 30}, {name: 'L', price: 40}], image: 'faheta.jpg' },
      { id: 37, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ø´Ø§ÙˆØ±Ù…Ø§', description: 'ØµÙ„ØµØ© Ø´Ø§ÙˆØ±Ù…Ø§ + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§ + Ø¯Ø¬Ø§Ø¬ Ø´Ø§ÙˆØ±Ù…Ø§ ØªØªØ±Ø§ + ÙÙ„ÙÙ„ Ø§Ø­Ù…Ø± + Ù…Ø®Ù„Ù„', sizes: [{name: 'S', price: 19}, {name: 'M', price: 31}, {name: 'L', price: 41}], image: 'shawerma.jpg' },
      { id: 38, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ø±Ø§Ù†Ø´ ØªØ´ÙŠÙƒÙ†', description: 'Ø¯Ø¬Ø§Ø¬ Ø§Ù„Ø±Ø§Ù†Ø´ + ØµÙ„ØµØ© Ø§Ù„Ø±Ø§Ù†Ø´ + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§', sizes: [{name: 'S', price: 20}, {name: 'M', price: 31}, {name: 'L', price: 41}], image: 'ranchchecken.jpg' },
      { id: 39, category: 'Ø¨ÙŠØªØ²Ø§', name: 'ØªØªØ±Ø§ ÙƒÙˆÙŠÙ†', description: 'Ù‚Ø·Ø¹ Ø¯Ø¬Ø§Ø¬ + ØµÙ„ØµØ© ØªØªØ±Ø§ Ø§Ù„Ø®Ø§ØµØ© + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§', sizes: [{name: 'S', price: 21}, {name: 'M', price: 32}, {name: 'L', price: 43}], image: 'tetraqueen.jpg' },
      { id: 40, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ø§ÙƒØ³ØªØ±Ø§ Ø³ÙˆØ¨Ø±ÙŠÙ…', description: 'ØµÙ„ØµØ© ØªØªØ±Ø§ + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§ + Ø²ÙŠØªÙˆÙ† Ø§Ø³ÙˆØ¯ + ÙÙ„ÙÙ„ Ø§Ø®Ø¶Ø± + Ù…Ø´Ø±ÙˆÙ… + Ù‚Ø·Ø¹ Ù„Ø­Ù… + Ø¨ØµÙ„ + Ø¨Ø¨Ø±ÙˆÙ†ÙŠ', sizes: [{name: 'S', price: 21}, {name: 'M', price: 31}, {name: 'L', price: 41}], image: 'exstrasuperreem.jpg' },
      { id: 41, category: 'Ø¨ÙŠØªØ²Ø§', name: 'ÙØ±Ù†Ø´ Ø¨ÙŠØªØ²Ø§', description: 'Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ + ØµÙ„ØµØ© ÙØ±Ø§Ù†Ø³ÙŠØ© Ø®Ø§ØµØ© + ÙÙ„ÙÙ„ Ø§Ø­Ù…Ø± + Ø¨ØµÙ„ + Ø²ÙŠØªÙˆÙ† Ø§Ø³ÙˆØ¯ + Ù…Ø´Ø±ÙˆÙ… + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§', sizes: [{name: 'S', price: 19}, {name: 'M', price: 31}, {name: 'L', price: 41}], image: 'freanch.jpg' },
      { id: 42, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ø®Ø¶Ø§Ø±', description: 'ØµÙ„ØµØ© ØªØªØ±Ø§ + ÙÙ„ÙÙ„ Ø§Ø®Ø¶Ø± + ÙÙ„ÙÙ„ Ø§ØµÙØ± + Ø¨ØµÙ„ + Ø²ÙŠØªÙˆÙ† Ø§Ø³ÙˆØ¯ + Ù…Ø´Ø±ÙˆÙ… + Ø·Ù…Ø§Ø·Ù… + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§', sizes: [{name: 'S', price: 16}, {name: 'M', price: 28}, {name: 'L', price: 28}], image: 'vegtabols.jpg' },
      { id: 43, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ø¨Ø§Ø±Ø¨ÙƒÙŠÙˆ Ø¯Ø¬Ø§Ø¬', description: 'Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ + ØµÙ„ØµØ© Ø§Ù„Ø¨Ø§Ø±Ø¨ÙƒÙŠÙˆ + ÙÙ„ÙÙ„ Ø§Ø®Ø¶Ø± + ÙÙ„ÙÙ„ Ø§ØµÙØ± + Ø¨ØµÙ„ + Ù…Ø´Ø±ÙˆÙ… + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§', sizes: [{name: 'S', price: 18}, {name: 'M', price: 30}, {name: 'L', price: 40}], image: 'bbq.jpg' },
      { id: 44, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ù…Ø§Ø±ØºØ±ÙŠØªØ§', description: 'Ù…ÙƒØ³ Ø§Ø¬Ø¨Ø§Ù† ØªØªØ±Ø§ + ØµÙ„ØµØ© ØªØªØ±Ø§ Ø§Ù„Ø®Ø§ØµØ©', sizes: [{name: 'S', price: 16}, {name: 'M', price: 28}, {name: 'L', price: 38}], image: 'margareta.jpg' },
      { id: 45, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ø¯Ø§ÙŠÙ†Ù…Ø§ÙŠØª Ø¯Ø¬Ø§Ø¬', description: 'Ø¯ÙŠÙ†Ø§Ù…ÙŠØª ØµÙˆØµ + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§ + Ø¯Ø¬Ø§Ø¬', sizes: [{name: 'S', price: 19}, {name: 'M', price: 29}, {name: 'L', price: 39}], image: 'dynamitt.jpg' },
      { id: 46, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ø¯Ø§ÙŠÙ†Ù…Ø§ÙŠØª Ø¬Ù…Ø¨Ø±ÙŠ', description: 'Ø¯ÙŠÙ†Ø§Ù…ÙŠØª ØµÙˆØµ + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§ + Ø¬Ù…Ø¨Ø±ÙŠ', sizes: [{name: 'S', price: 23}, {name: 'M', price: 35}, {name: 'L', price: 45}], image: 'dynamitt.jpg' },
      { id: 47, category: 'Ø¨ÙŠØªØ²Ø§', name: 'Ø¨ÙŠØ¨Ø±ÙˆÙ†ÙŠ', description: 'ØµÙ„ØµØ© ØªØªØ±Ø§ + Ø¨Ø¨Ø±ÙˆÙ†ÙŠ + Ø¬Ø¨Ù†Ø© ØªØªØ±Ø§', sizes: [{name: 'S', price: 19}, {name: 'M', price: 31}, {name: 'L', price: 41}], image: 'babrone.jpg' },
      // ØµÙˆØµØ§Øª (Sauces)
      { id: 48, category: 'ØµÙˆØµØ§Øª', name: 'ØµÙˆØµ Ø¯Ø§ÙŠÙ†Ù…Ø§ÙŠØª', description: '', price: 2, image: 'suse4.png' },
      { id: 49, category: 'ØµÙˆØµØ§Øª', name: 'ØµÙˆØµ Ø¬Ø¨Ù†Ø©', description: '', price: 4, image: 'suse2.png' },
      { id: 50, category: 'ØµÙˆØµØ§Øª', name: 'ØµÙˆØµ ÙØ±Ù†Ø´', description: '', price: 2, image: 'suse3.png' },
      { id: 51, category: 'ØµÙˆØµØ§Øª', name: 'ØµÙˆØµ Ø±Ø§Ù†Ø´', description: '', price: 2, image: 'suse1.png' },
      { id: 52, category: 'ØµÙˆØµØ§Øª', name: 'ØµÙˆØµ Ø«ÙˆÙ…', description: '', price: 2, image: 'suse1.png' },
      // ÙˆØ¬Ø¨Ø© Ø£Ø·ÙØ§Ù„ (Kids Meal)
      { id: 53, category: 'ÙˆØ¬Ø¨Ø© Ø£Ø·ÙØ§Ù„', name: 'ÙˆØ¬Ø¨Ø© Ø£Ø·ÙØ§Ù„ Ø¬Ø¨Ù†', description: '', price: 15, image: 'happymeal.jpg' },
      { id: 54, category: 'ÙˆØ¬Ø¨Ø© Ø£Ø·ÙØ§Ù„', name: 'ÙˆØ¬Ø¨Ø© Ø£Ø·ÙØ§Ù„ Ø®Ø¶Ø§Ø±', description: '', price: 15, image: 'happymeal.jpg' },
      { id: 55, category: 'ÙˆØ¬Ø¨Ø© Ø£Ø·ÙØ§Ù„', name: 'ÙˆØ¬Ø¨Ø© Ø£Ø·ÙØ§Ù„ Ø¨Ø¨Ø±ÙˆÙ†ÙŠ', description: '', price: 15, image: 'happymeal.jpg' },
      // Ù…Ø´Ø±ÙˆØ¨Ø§Øª (Drinks)
      { id: 56, category: 'Ù…Ø´Ø±ÙˆØ¨Ø§Øª', name: 'Ù…Ø§Ø¡', description: '', price: 2, image: 'water.jpg' },
      { id: 57, category: 'Ù…Ø´Ø±ÙˆØ¨Ø§Øª', name: 'ÙƒÙˆÙ„Ø§', description: '1 Ù„ØªØ±', price: 8, image: 'colaleter.jpg' },
      { id: 58, category: 'Ù…Ø´Ø±ÙˆØ¨Ø§Øª', name: 'ÙƒÙˆÙ„Ø§', description: '2.25 Ù„ØªØ±', price: 12, image: 'colafamily.jpg' },
      { id: 59, category: 'Ù…Ø´Ø±ÙˆØ¨Ø§Øª', name: 'ÙƒÙˆÙ„Ø§', description: 'Ø¹Ù„Ø¨Ø©', price: 4, image: 'cola.jpg' },
      { id: 60, category: 'Ù…Ø´Ø±ÙˆØ¨Ø§Øª', name: 'Ø³ÙŠØ²Ø±', description: 'Ø¹Ù„Ø¨Ø©', price: 4, image: 'ceaser.jpg' },
      { id: 61, category: 'Ù…Ø´Ø±ÙˆØ¨Ø§Øª', name: 'Ø±Ø¨ÙŠØ¹', description: 'Ø¹Ù„Ø¨Ø©', price: 3, image: 'rabea.jpg' }
    ];

    const menuContainer = document.getElementById("menu");
    const cartContainer = document.getElementById("cart-items");
    const tabsContainer = document.getElementById("category-tabs");
    let cart = [];
    let checkoutStep = 0;
    let currentCategory = 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØµÙ†Ø§Ù'; // Default to show all

    function getUniqueCategories() {
      const categories = [...new Set(menuData.map(item => item.category))];
      return ['Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØµÙ†Ø§Ù', ...categories];
    }

    function renderTabs() {
      const categories = getUniqueCategories();
      tabsContainer.innerHTML = '';
      categories.forEach(category => {
        const button = document.createElement("button");
        button.innerText = category;
        button.className = (category === currentCategory) ? 'active' : '';
        button.onclick = () => filterMenu(category);
        tabsContainer.appendChild(button);
      });
    }

    function filterMenu(category) {
      currentCategory = category;
      renderTabs();
      renderMenu();
    }

    function renderMenu() {
      menuContainer.innerHTML = "";
      let filteredItems = menuData;
      if (currentCategory !== 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ØµÙ†Ø§Ù') {
        filteredItems = menuData.filter(item => item.category === currentCategory);
      }

      filteredItems.forEach(item => {
        const div = document.createElement("div");
        div.className = "item";
        const isSizeBased = item.sizes !== undefined;
        
        let actionsHTML = '';
        if (isSizeBased) {
          actionsHTML = `<div class="size-buttons">`;
          item.sizes.forEach(size => {
            const cartItemId = `${item.id}-${size.name}`;
            const inCart = cart.find(c => c.id === cartItemId);
            if (inCart) {
              actionsHTML += `
                <div style="display: flex; align-items: center; gap: 0.25rem;">
                  <button class="qty-btn" onclick="changeQty('${cartItemId}', -1)">-</button>
                  <span>${inCart.qty}</span>
                  <button class="qty-btn" onclick="changeQty('${cartItemId}', 1)">+</button>
                </div>
              `;
            } else {
              actionsHTML += `<button onclick="addWithSize(${item.id}, '${size.name}', ${size.price})">${size.name} (${size.price} Ø±ÙŠØ§Ù„)</button>`;
            }
          });
          actionsHTML += `</div>`;
        } else {
          const inCart = cart.find(c => c.id === item.id);
          if (inCart) {
            actionsHTML = `
              <button class="qty-btn" onclick="changeQty(${item.id}, -1)">-</button>
              <span>${inCart.qty}</span>
              <button class="qty-btn" onclick="changeQty(${item.id}, 1)">+</button>
            `;
          } else {
            actionsHTML = `<button onclick="addToCart(${item.id})">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>`;
          }
        }
        
        div.innerHTML = `
          <img src="${item.image || 'https://via.placeholder.com/300x150'}" alt="${item.name}" />
          <h3>${item.name}</h3>
          <p>${item.description}</p>
          ${!isSizeBased ? `<p class="price">${item.price} Ø±ÙŠØ§Ù„</p>` : ''}
          <div class="actions">
            ${actionsHTML}
          </div>
        `;
        menuContainer.appendChild(div);
      });
    }

    function addWithSize(id, sizeName, price) {
      const item = menuData.find(m => m.id === id);
      const cartItemId = `${id}-${sizeName}`;
      const found = cart.find(c => c.id === cartItemId);
      if (found) {
        found.qty++;
      } else {
        cart.push({
          id: cartItemId,
          name: `${item.name} (${sizeName})`,
          baseId: id,
          price: price,
          qty: 1
        });
      }
      renderCart();
      renderMenu();
    }

    function addToCart(id){
      const item = menuData.find(m => m.id === id);
      if (!item) return;
      const found = cart.find(c => c.id === id);
      if(found){
        found.qty++;
      } else {
        cart.push({...item, qty:1});
      }
      renderCart();
      renderMenu();
    }

    function changeQty(id, delta){
      const found = cart.find(c => c.id == id);
      if(found){
        found.qty += delta;
        if(found.qty <= 0){
          cart = cart.filter(c => c.id != id);
        }
      }
      renderMenu();
      renderCart();
    }

    function removeFromCart(id){
      cart = cart.filter(c => c.id != id);
      renderMenu();
      renderCart();
    }

    function renderCart(){
      cartContainer.innerHTML = '';
      let total = 0;
      cart.forEach(c => {
        const div = document.createElement("div");
        div.className = "cart-item";
        div.innerHTML = `
          <span>${c.name} x${c.qty} (${c.price} Ø±ÙŠØ§Ù„)</span>
          <button onclick="removeFromCart('${c.id}')">Ø­Ø°Ù</button>
        `;
        cartContainer.appendChild(div);
        total += c.price * c.qty;
      });

      const totalDiv = document.createElement("div");
      totalDiv.style.marginTop = "1rem";
      totalDiv.style.fontWeight = "bold";
      totalDiv.innerText = "Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: " + total + " Ø±ÙŠØ§Ù„";
      cartContainer.appendChild(totalDiv);

      renderMenu();
    }

    function toggleCart(){
      document.getElementById("cart").classList.toggle("open");
    }
    
    if (tg) {
      tg.onEvent('mainButtonClicked', () => {
        if (document.getElementById("cart").classList.contains("open")) {
          toggleCart();
        }
      });
    }

    function getChatId() {
      const fromTG = window.Telegram?.WebApp?.initDataUnsafe?.user?.id ?? null;
      if (fromTG) return Number(fromTG);
      const params = new URLSearchParams(location.search);
      const fromURL = params.get('chat_id');
      return fromURL ? Number(fromURL) : null;
    }

    function sanitizeCartItems(items) {
      return items.map(i => {
        const priceNum = Number(i.price || 0);
        const qtyNum = Number(i.qty || 0);
        return { name: i.name, price: priceNum, qty: qtyNum };
      });
    }

    async function checkout(){
      if(cart.length === 0){
        alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!");
        return;
      }

      if(checkoutStep === 0){
        toggleCart();
        checkoutStep = 1;
        return;
      }

      if(!window.Telegram?.WebApp){
        alert("âš ï¸ Ø§ÙØªØ­ Ø§Ù„Ù…Ù†ÙŠÙˆ Ù…Ù† Ø¯Ø§Ø®Ù„ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ø¹Ø¨Ø± Ø²Ø± Ø§Ù„Ø¨ÙˆØª.");
        return;
      }

      const chat_id = getChatId();
      const cleanItems = sanitizeCartItems(cart);
      const total = cleanItems.reduce((s,c) => s + (c.price * c.qty), 0);

      const payload = {
        items: cleanItems,
        total,
        time: new Date().toISOString(),
        chat_id,
        source: "webapp"
      };

      try {
        const res = await fetch("https://s517.app.n8n.cloud/webhook/cart_submit", {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify(payload)
        });

        if(res.ok){
          alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­! âœ…");
          try { window.Telegram.WebApp.close(); } catch(_) {}
          cart = [];
          renderMenu();
          renderCart();
          checkoutStep = 0;
        } else {
          const t = await res.text();
          alert("âš ï¸ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„\n" + t);
        }
      } catch (err) {
        alert("âŒ Load failed: Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„");
      }
    }

    renderTabs();
    renderMenu();
  </script>
</body>
</html>

